{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\nconst VITE_API_KEY = '54276713-c64412dcc235398d3663f989c';\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport async function getImagesByQuery(query, page) {\n const response = await axios.get(BASE_URL, {\nparams:{\nkey: VITE_API_KEY,\nq: query,\nimage_type: 'photo',\norientation: 'horizontal',\nsafesearch: true,\npage: page,\nper_page: 15}})\n     return response.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst list = document.querySelector('ul');\n\nlet gallery = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom'\n});\n\n\nexport function createGallery(images){\n    \n    const img = images.map((image) => {\n    return `<li><a href =\"${image.largeImageURL}\"><img class = \"img-div\" src =\"${image.webformatURL}\" alt =\"${image.tags}\">\n    <div class = \"elements-div\"><div class = \"el-div\"><b>likes</b><p>${image.likes}</p></div><div class = \"el-div\"><b>Views</b><p>${image.views}</p></div>\n    <div class = \"el-div\"><b>Comments</b><p>${image.comments}</p></div><div class = \"el-div\">\n    <b>Downloads</b><p>${image.downloads}</p></div></div>\n    </a>\n    </li>`;\n    }).join(\"\");\n    \nlist.insertAdjacentHTML(\"beforeend\", img);\n    gallery.refresh();\n};\n\nexport function clearGallery(){\n   list.innerHTML = '';\n}\n\nexport function showLoader(){\n    const loader = document.querySelector('.loader');\n    if (loader){\nloader.classList.add('is-visible');\n}\n}\n\nexport function hideLoader(){\n    const loader = document.querySelector('.loader');\n    if(loader){\nloader.classList.remove('is-visible');\n    }\n}\n\nexport function showLoadMoreButton(){\n     const buttonEl = document.querySelector('.btn-scroll');\n    if(buttonEl){\nbuttonEl.classList.add('is-visible');\n    }\n}\n\n export function hideLoadMoreButton(){\n   const buttonEl = document.querySelector('.btn-scroll');\n    if(buttonEl){\nbuttonEl.classList.remove('is-visible');\n}\n}\n","import {getImagesByQuery} from './js/pixabay-api'\nimport {createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton} from './js/render-functions';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst input = document.querySelector('input');\nconst form = document.querySelector('form');\n\n\nlet query = '';\nlet page  = 1;\nlet per_page = 15;\n\nform.addEventListener('submit', async (event) => {\nevent.preventDefault();\n query = input.value.trim();\nif(query === ''){\n page = 1;\n clearGallery();\n hideLoadMoreButton();\n    iziToast.show({\n    message: 'Sorry, there are no images matching your search query. Please try again!',\nmessageColor: '#fafafb',\nbackgroundColor: '#ef4040',\nposition: 'topRight'\n})\n}else if(query){\n    hideLoadMoreButton();\n clearGallery();\n page = 1;\nshowLoader();\ntry{\n    const images = await getImagesByQuery(query, page);\n    \nif(images.totalHits === 0){\n iziToast.show({\n    message: 'Sorry, there are no images matching your search query. Please try again!',\nmessageColor: '#fafafb',\nbackgroundColor: '#ef4040',\nposition: 'topRight'\n});\nhideLoadMoreButton();\n}else{\n createGallery(images.hits)}\n const totalPages = Math.ceil(images.totalHits / per_page);\n if(page >= totalPages){\n     hideLoadMoreButton();\n iziToast.show({\n        message: `We're sorry, but you've reached the end of search results`,\nmessageColor: '#fafafb',\nbackgroundColor: '#ef4040',\nposition: 'topRight'\n    });\n }else{\n       showLoadMoreButton();\n }\n \n}\ncatch(error) {iziToast.error({ message: 'Sorry, there are no images matching your search query. Please try again!',\nmessageColor: '#fafafb',\nbackgroundColor: '#ef4040',\nposition: 'topRight'})}\nfinally{\n     hideLoader();\n}\ninput.value = '';\n}\n})\n\n\nconst btnScroll = document.querySelector('.btn-scroll');\n\nbtnScroll.addEventListener('click', async (event) =>{\n\n    page +=1;\n    showLoader();\n    try{\n        hideLoadMoreButton();\nconst data = await getImagesByQuery(query, page);\nconst list = document.querySelector('.gallery');\ncreateGallery(data.hits,list);\n\nif( data.hits.length > 0){\n\nconst total = Math.ceil(data.totalHits / per_page)\nconsole.log();\n\nif(page >= total){\nhideLoadMoreButton();\n  iziToast.show({\n        message: `We're sorry, but you've reached the end of search results`,\nmessageColor: '#fafafb',\nbackgroundColor: '#ef4040',\nposition: 'topRight'\n    });\n}\nelse{  \nshowLoadMoreButton();\n}\nconst item = document.querySelector('li');\nconst pictureHeight = item.getBoundingClientRect().height;\n\nwindow.scrollBy({\n    top: pictureHeight * 2,\n    behavior: 'smooth'\n});\n}}\ncatch(error){\n    iziToast.show({\n    message: 'Sorry, there are no images matching your search query. Please try again!',\nmessageColor: '#fafafb',\nbackgroundColor: '#ef4040',\nposition: 'topRight'\n})\n}\nfinally{\n    hideLoader();\n}\n});"],"names":["VITE_API_KEY","BASE_URL","axios","getImagesByQuery","query","page","list","gallery","SimpleLightbox","createGallery","images","img","image","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","buttonEl","hideLoadMoreButton","input","form","per_page","event","iziToast","totalPages","btnScroll","data","total","pictureHeight"],"mappings":"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"}